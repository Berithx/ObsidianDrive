```table-of-contents
title: 
style: nestedList # TOC style (nestedList|inlineFirstLevel)
minLevel: 0 # Include headings from the specified level
maxLevel: 0 # Include headings up to the specified level
includeLinks: true # Make headings clickable
debugInConsole: false # Print debug info in Obsidian console
```

# 1. Spring
## ■ Entity 연관 관계
### - 1 대 1 관계
- `@OneToOne` 애너테이션은 1대1 관계를 맺어주는 역할
  
- 단방향 관계
	- 외래 키의 주인
		- Entity에서 외래 키의 주인은 일반적으로 N(다)의 관계인 Entity이지만 1대1 관계에서는 외래 키의 주인을 직접 지정해야 한다.
		  >외래 키의 주인만이 외래 키를 등록, 수정, 삭제할 수 있고 주인이 아닌 쪽은 오직 외래 키를 읽기만 할 수 있다.
		  
		- `@JoinColumn()` 애너테이션은 외래 키의 주인이 활용한다.
			- DB의 컬럼명, null 여부, unique 여부 등을 설정할 수 있다.
			  
- 양방향 관계
	- 양방향 설정 : 양방향 관계에서 외래 키의 주인을 지정해줄 때 mappedBy 옵션을 사용한다.
		- mappedBy의 속성 값은 외래 키의 주인인 상대 Entity의 필드명을 의미한다.
		  
	- 관계 설정방법
		- 단방향이라면 외래 키의 주인만 상대 Entity 타입의 필드를 가지면서 `@JoinColmn()` 을 활용하여 외래 키의 속성을 설정한다.
		  
		- 양방향이라면 외래 키의 주인은 상대 Entity 타입의 필드를 가지면서 `@JoinColmn()` 을
		  활용하여 외래 키의 속성을 설정한다.
			- 상대 Entity는 외래 키의 주인 Entity 타입의 필드를 가지면서 mappedBy 옵션을 사용하여 속성 값으로 외래 키의 주인 Entity에 선언된 `@JoinColmn()` 으로 설정되고 있는 필드명을 넣어준다.
			  > 1. 외래 키의 주인 Entity에서 `@JoinColmn()` 애너테이션을 사용하지 않아도 default 옵션이 적용되기 때문에 생략할 수 있다. 
			  >    - 1대N 관계에서 외래 키의 주인 Entity가 `@JoinColmn()` 애너테이션을 생략한다면 JPA가 외래 키를 저장할 컬럼을 파악할 수 없어서 의도하지 않은 중간 테이블이 생성된다.
			  >    - 따라서 외래 키의 주인 Entity에서 `@JoinColmn()` 애너테이션을 활용하는 것이 좋다
			  >      
			  > 2. 양방향 관계에서 mappedBy 옵션을 생략한 경우 JPA가 외래 키의 주인 Entity를 파악할 수가 없어 의도하지 않은 중간 테이블이 생성되기 때문에 반드시 설정하는 것이 좋다.

### - N 대 1 관계
- `@ManyToOne` 애너테이션은 N대1 관계를 맺어주는 역할

- 단방향 관계
	- 외래 키의 주인
		- Entity에서 외래 키를 관리하는 주인은 N의 Entity이지만 실제 외래 키는 1의 Entity가 가진다.
			- 1:N에서 N관계의 테이블이 외래 키를 가질 수 있기 때문에 외래 키는 N관계인 Entity의 테이블에 외래 키 컬럼을 만들어 추가하지만 외래 키의 주인인 1관계인 Entity를 통해 관리된다.
			  
	- 외래 키를 1관계인 Entity가 직접 가길 수 있다면 INSERT





[[Templates]]
