```table-of-contents
title: 
style: nestedList # TOC style (nestedList|inlineFirstLevel)
minLevel: 0 # Include headings from the specified level
maxLevel: 0 # Include headings up to the specified level
includeLinks: true # Make headings clickable
debugInConsole: false # Print debug info in Obsidian console
```

# 1. Spring
## ■ Spring MVC
### - 정적페이지와 동적페이지

![[Pasted image 20240516224334.png]]
- 정적 페이지 처리
  ![[Pasted image 20240516232204.png]]
	- static 폴더
	  ``` URL
		http://localhost:8080/index.html
		```

		- 정적페이지는 static 폴더 내 html 파일로 존재한다.
		- SpringBoot 서버는 html 파일을 바로 요청하면 해당 html 파일을 static 폴더에서 찾은 후 반환한다.
		- Controller를 거쳐 html을 반환할 수도 있으나 이미 완성된 정적 html를 Controller를 통해 반환할 필요는 없다.
		- 하지만 필요하다면  build.gradle의 dependencies에서 [[Thymeleaf]] 를 비활성화 후 사용할 수 있다. 
		``` groovy
		@GetMapping("/static-index")
		public String index() {
		return "index.html";
		}
		```
		- Thymeleaf 비활성화 후 위와 같은 형태로 API를 작성하여 index.html를 문자열로 반환하면 static 폴더에서 해당 html 파일을 찾아서 반환한다.
		  
	  - Redirect
	  ``` URL
		http://localhost:8080/html/redirect
		```
		
		``` groovy
		@GetMapping("/html/redirect")
		public String htmlStatic() {
	    return "redirect:/index.html";
		}
		```
		- 템플릿 엔진(Thymeleaf)를 적용한 상태에서 static 폴더의 html을 Controller를 통해 처할 필요가 있다면 `redirect:/index.html` 와 같이 redirect 요청을 문자열로 반환하면
		  `http://localhost:8080/index.html` 요청이 재 수행되면서 static 폴더의 html 파일을 반환할 수 있다.
	  
	  - Template engine에 View 전달
	    ``` URL
	    http://localhost:8080/html/templates
		```
		
		``` groovy
		@GetMapping("/html/templates")
		public String htmlTemplates() {
		return "index";
		}
		```
		
		- prefix : classpath:/templetes/
		- suffix: .html
		  /resources/templates/index.html
		  
		- static 폴더에 있는 html 파일을 바로 호출하는 방법이 가장 간단하나, 브라우저에서 바로 접근하지 못하게 하거나 특정 상황에 Controller를 통해서 제어하고 싶다면 이렇게 temlplates 폴더에 해당 정적 html 파일을 추가하고 해당 html 파일명을 문자열로 반환하여 처리할 수 있다. ( .html 생략 가능 )

- 동적 페이지 처리
  ![[Pasted image 20240516232217.png]]
	- 동적 페이지 처리 과정
		-  Client 요청을 Controller에서 Model로 처리한다.
			- DB 조회가 필요하다면 DB 작업 후 처리한 데이터를 Model에 저장한다.
		- Template engine(Thymeleaf)에 View, Model을 전달한다.
			- View : 동적 HTML 파일
			- Model : View에 적용할 정보들
		- Template engine
			- View에 Model을 적용하여 동적 페이지 생성
				-  Ex) 로그인 성공 시, "로그인 된 사용자의 Nickname"을 페이지에 추가
				- Template engine 종류 : Thymeleaf, Groovy, FreeMarker, Jade, JSP 등
		- Client에 View를 전달한다.


### - 데이터를 Client에 반환하는 방법
- JSON 데이터 반환 방법
	- Template Engine이 적용된 SpringBoot에서는 Controller에서 문자열을 반환하면 templates 폴더에서 해당 문자열의 `.html` 파일을 찾아 반환한다.
	- 따라서 html 파일이 아닌 JSON 데이터를 브라우저에 반환하려면 해당 메서드에 `@ResponseBody` 애너테이션을 추가해주면 된다.
	  
	- 방법
		- 반환값 : String
		  ``` URL
				http://localhost:8080/reponse/json/string
			```
			
			``` groovy
				@GetMapping("/response/json/class")
				@ResponseBody
				public Star helloClassJson() {
					return new Star("Robbie", 95);
				}
			```
		- "JAVA 객체" -> JSON으로 변환
		- Spring 에서 자동으로 Java의 객체를 JSON으로 변환해준다.

- @RestController
  = @Controller + @ResponseBody
	- @RestController를 사용하면 해당 클래스의 모든 메서드에 @ResponseBody 애너테이션이 추가되는 효과를 부여할 수 있다.

### - Jackson이란
- Jackson 라이브러리
	- Jackson은 JSON 데이터 구조를 처리해주는 라이브러리
		- Object를 JSON 타입의 String으로 변환해줄 수 있다.
		- JSON 타입의 String을 Object로 변환해줄 수 있다.
	- Spring 3.0 버전 이후로 Jackson과 관련된 API를 제공함으로써, 우리가 직접 소스코드를 작성하여 JSON 데이터를 처리하지 않아도 자동으로 처리해준다.
		- 